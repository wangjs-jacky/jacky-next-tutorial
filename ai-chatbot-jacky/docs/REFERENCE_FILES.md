# åŸé¡¹ç›®æ–‡ä»¶å‚è€ƒç´¢å¼•

è¿™ä¸ªæ–‡æ¡£åˆ—å‡ºäº†æ¯ä¸ªå­¦ä¹ é˜¶æ®µåº”è¯¥å‚è€ƒçš„åŸé¡¹ç›®æ–‡ä»¶ã€‚**å»ºè®®**ï¼šå…ˆè‡ªå·±å°è¯•å®ç°ï¼Œé‡åˆ°å›°éš¾æ—¶å†å‚è€ƒåŸé¡¹ç›®ä»£ç ã€‚

---

## é˜¶æ®µ 0ï¼šé¡¹ç›®åˆå§‹åŒ–

### å‚è€ƒæ–‡ä»¶
- `package.json` - æŸ¥çœ‹ä¾èµ–é…ç½®
- `tsconfig.json` - TypeScript é…ç½®å‚è€ƒ
- `tailwind.config.ts` - Tailwind é…ç½®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- `next.config.ts` - Next.js é…ç½®

---

## é˜¶æ®µ 1ï¼šåŸºç¡€ UI æ­å»º

### å‚è€ƒæ–‡ä»¶
- `app/layout.tsx` - æ ¹å¸ƒå±€ç»“æ„
- `app/globals.css` - å…¨å±€æ ·å¼
- `app/(chat)/page.tsx` - èŠå¤©é¡µé¢ç»“æ„
- `components/ui/button.tsx` - Button ç»„ä»¶å®ç°
- `components/ui/input.tsx` - Input ç»„ä»¶å®ç°
- `components/ui/textarea.tsx` - Textarea ç»„ä»¶å®ç°
- `components/ui/card.tsx` - Card ç»„ä»¶å®ç°

### å­¦ä¹ é‡ç‚¹
- å¦‚ä½•ç»„ç»‡å¸ƒå±€ç»“æ„
- shadcn/ui ç»„ä»¶çš„å®ç°æ–¹å¼
- CSS å˜é‡çš„ä½¿ç”¨

---

## é˜¶æ®µ 2ï¼šæ¶ˆæ¯æ˜¾ç¤ºåŠŸèƒ½

### å‚è€ƒæ–‡ä»¶
- `lib/types.ts` - ç±»å‹å®šä¹‰ï¼ˆé‡ç‚¹å…³æ³¨ `ChatMessage`ï¼‰
- `components/message.tsx` - å•æ¡æ¶ˆæ¯ç»„ä»¶
- `components/messages.tsx` - æ¶ˆæ¯åˆ—è¡¨ç»„ä»¶
- `components/elements/message.tsx` - æ¶ˆæ¯å…ƒç´ ç»„ä»¶

### å­¦ä¹ é‡ç‚¹
- æ¶ˆæ¯æ•°æ®ç»“æ„è®¾è®¡
- ç»„ä»¶æ‹†åˆ†åŸåˆ™
- æ ·å¼è®¾è®¡æ¨¡å¼

---

## é˜¶æ®µ 3ï¼šAI SDK é›†æˆ

### å‚è€ƒæ–‡ä»¶
- `app/api/chat/route.ts` - èŠå¤© API è·¯ç”±ï¼ˆ**æ ¸å¿ƒæ–‡ä»¶**ï¼‰
- `components/chat.tsx` - Chat ç»„ä»¶ï¼ˆé‡ç‚¹å…³æ³¨ `useChat` çš„ä½¿ç”¨ï¼‰
- `lib/ai/models.ts` - AI æ¨¡å‹é…ç½®
- `lib/ai/providers.ts` - AI Provider é…ç½®
- `lib/utils.ts` - å·¥å…·å‡½æ•°ï¼ˆ`generateUUID` ç­‰ï¼‰

### å­¦ä¹ é‡ç‚¹
- `useChat` Hook çš„ä½¿ç”¨æ–¹æ³•
- API Route çš„å®ç°
- æµå¼æ•°æ®å¤„ç†
- é”™è¯¯å¤„ç†

---

## é˜¶æ®µ 4ï¼šè¾“å…¥ç»„ä»¶ä¼˜åŒ–

### å‚è€ƒæ–‡ä»¶
- `components/multimodal-input.tsx` - å¤šæ¨¡æ€è¾“å…¥ç»„ä»¶ï¼ˆ**é‡ç‚¹å‚è€ƒ**ï¼‰
- `components/elements/prompt-input.tsx` - è¾“å…¥æ¡†å…ƒç´ 
- `components/submit-button.tsx` - æäº¤æŒ‰é’®

### å­¦ä¹ é‡ç‚¹
- è¾“å…¥æ¡†çŠ¶æ€ç®¡ç†
- é”®ç›˜äº‹ä»¶å¤„ç†
- æ–‡ä»¶ä¸Šä¼ é›†æˆï¼ˆå…ˆçœ‹åŸºç¡€éƒ¨åˆ†ï¼‰

---

## é˜¶æ®µ 5ï¼šèŠå¤©å†å²ç®¡ç†

### å‚è€ƒæ–‡ä»¶
- `lib/db/schema.ts` - æ•°æ®åº“ Schemaï¼ˆ**é‡ç‚¹**ï¼‰
- `lib/db/queries.ts` - æ•°æ®åº“æŸ¥è¯¢å‡½æ•°
- `lib/db/migrate.ts` - æ•°æ®åº“è¿ç§»è„šæœ¬
- `app/(chat)/chat/[id]/page.tsx` - åŠ¨æ€è·¯ç”±é¡µé¢
- `app/(chat)/actions.ts` - Server Actions

### å­¦ä¹ é‡ç‚¹
- Drizzle ORM Schema å®šä¹‰
- æ•°æ®åº“æŸ¥è¯¢æ¨¡å¼
- Server Actions vs API Routes
- åŠ¨æ€è·¯ç”±ä½¿ç”¨

---

## é˜¶æ®µ 6ï¼šä¾§è¾¹æ å’Œå†å²è®°å½•

### å‚è€ƒæ–‡ä»¶
- `components/app-sidebar.tsx` - ä¾§è¾¹æ ä¸»ç»„ä»¶
- `components/sidebar-history.tsx` - å†å²è®°å½•åˆ—è¡¨
- `components/sidebar-history-item.tsx` - å†å²è®°å½•é¡¹
- `app/(chat)/layout.tsx` - èŠå¤©å¸ƒå±€ï¼ˆåŒ…å«ä¾§è¾¹æ ï¼‰

### å­¦ä¹ é‡ç‚¹
- ä¾§è¾¹æ ç»„ä»¶ç»“æ„
- åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–
- è·¯ç”±å¯¼èˆªå¤„ç†

---

## é˜¶æ®µ 7ï¼šç”¨æˆ·è®¤è¯

### å‚è€ƒæ–‡ä»¶
- `app/(auth)/auth.ts` - è®¤è¯ä¸»é…ç½®ï¼ˆ**é‡ç‚¹**ï¼‰
- `app/(auth)/auth.config.ts` - è®¤è¯é…ç½®
- `app/(auth)/login/page.tsx` - ç™»å½•é¡µé¢
- `app/(auth)/register/page.tsx` - æ³¨å†Œé¡µé¢
- `app/(auth)/actions.ts` - è®¤è¯ç›¸å…³ Actions
- `components/auth-form.tsx` - è®¤è¯è¡¨å•
- `middleware.ts` - ä¸­é—´ä»¶é…ç½®

### å­¦ä¹ é‡ç‚¹
- NextAuth.js é…ç½®
- å¯†ç åŠ å¯†å¤„ç†
- è¡¨å•éªŒè¯
- è·¯ç”±ä¿æŠ¤

---

## é˜¶æ®µ 8ï¼šæ¨¡å‹é€‰æ‹©å™¨

### å‚è€ƒæ–‡ä»¶
- `lib/ai/models.ts` - æ¨¡å‹é…ç½®ï¼ˆ**é‡ç‚¹**ï¼‰
- `components/model-selector.tsx` - æ¨¡å‹é€‰æ‹©å™¨ç»„ä»¶
- `components/ui/select.tsx` - Select ç»„ä»¶

### å­¦ä¹ é‡ç‚¹
- æ¨¡å‹é…ç½®ç®¡ç†
- Cookie æ“ä½œ
- çŠ¶æ€åŒæ­¥

---

## é˜¶æ®µ 9ï¼šæ¶ˆæ¯æ“ä½œåŠŸèƒ½

### å‚è€ƒæ–‡ä»¶
- `components/message-actions.tsx` - æ¶ˆæ¯æ“ä½œç»„ä»¶
- `components/message-editor.tsx` - æ¶ˆæ¯ç¼–è¾‘å™¨
- `app/(chat)/api/vote/route.ts` - æŠ•ç¥¨ API
- `app/(chat)/actions.ts` - Server Actionsï¼ˆæ¶ˆæ¯ç›¸å…³ï¼‰

### å­¦ä¹ é‡ç‚¹
- æ¶ˆæ¯ç¼–è¾‘é€»è¾‘
- ä¹è§‚æ›´æ–°æ¨¡å¼
- API è®¾è®¡

---

## é˜¶æ®µ 10ï¼šæ–‡ä»¶ä¸Šä¼ 

### å‚è€ƒæ–‡ä»¶
- `app/(chat)/api/files/upload/route.ts` - æ–‡ä»¶ä¸Šä¼  APIï¼ˆ**é‡ç‚¹**ï¼‰
- `components/multimodal-input.tsx` - æ–‡ä»¶ä¸Šä¼ é›†æˆéƒ¨åˆ†
- `components/preview-attachment.tsx` - é™„ä»¶é¢„è§ˆç»„ä»¶

### å­¦ä¹ é‡ç‚¹
- æ–‡ä»¶ä¸Šä¼ å¤„ç†
- Vercel Blob ä½¿ç”¨
- æ–‡ä»¶ç±»å‹éªŒè¯

---

## é˜¶æ®µ 11ï¼šé«˜çº§åŠŸèƒ½

### å‚è€ƒæ–‡ä»¶
- `components/elements/code-block.tsx` - ä»£ç å—ç»„ä»¶
- `components/theme-provider.tsx` - ä¸»é¢˜æä¾›è€…
- `lib/editor/react-renderer.tsx` - Markdown æ¸²æŸ“å™¨

### å­¦ä¹ é‡ç‚¹
- ä»£ç é«˜äº®å®ç°
- Markdown æ¸²æŸ“
- ä¸»é¢˜ç³»ç»Ÿ

---

## é˜¶æ®µ 12ï¼šä¼˜åŒ–å’Œéƒ¨ç½²

### å‚è€ƒæ–‡ä»¶
- `lib/errors.ts` - é”™è¯¯å¤„ç†
- `lib/utils.ts` - å·¥å…·å‡½æ•°ï¼ˆé”™è¯¯å¤„ç†ç›¸å…³ï¼‰
- `next.config.ts` - éƒ¨ç½²é…ç½®
- `.env.example` - ç¯å¢ƒå˜é‡ç¤ºä¾‹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

### å­¦ä¹ é‡ç‚¹
- é”™è¯¯è¾¹ç•Œå¤„ç†
- æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- ç¯å¢ƒå˜é‡ç®¡ç†

---

## ğŸ“– é˜…è¯»å»ºè®®

### 1. é˜…è¯»é¡ºåº
1. **å…ˆçœ‹ç±»å‹å®šä¹‰**ï¼š`lib/types.ts` - äº†è§£æ•°æ®ç»“æ„
2. **å†çœ‹ç»„ä»¶å®ç°**ï¼šç†è§£ç»„ä»¶å¦‚ä½•å·¥ä½œ
3. **æœ€åçœ‹ API/Server Actions**ï¼šç†è§£æ•°æ®æµ

### 2. é˜…è¯»æ–¹æ³•
- **ä¸è¦ç›´æ¥å¤åˆ¶ä»£ç **ï¼šç†è§£åè‡ªå·±å®ç°
- **å…³æ³¨è®¾è®¡æ¨¡å¼**ï¼šå­¦ä¹ ä»£ç ç»„ç»‡æ–¹å¼
- **æ³¨æ„é”™è¯¯å¤„ç†**ï¼šå­¦ä¹ å¦‚ä½•å¤„ç†è¾¹ç•Œæƒ…å†µ
- **è§‚å¯Ÿæ€§èƒ½ä¼˜åŒ–**ï¼šå­¦ä¹ ä¼˜åŒ–æŠ€å·§

### 3. é‡åˆ°ä¸ç†è§£çš„åœ°æ–¹
- æŸ¥çœ‹ç›¸å…³åº“çš„å®˜æ–¹æ–‡æ¡£
- æœç´¢ç›¸å…³æ¦‚å¿µ
- å°è¯•ç®€åŒ–å®ç°ï¼Œå…ˆè®©åŠŸèƒ½è·‘èµ·æ¥

---

## ğŸ¯ æ ¸å¿ƒæ–‡ä»¶ä¼˜å…ˆçº§

### å¿…é¡»ç†è§£çš„æ–‡ä»¶ï¼ˆâ­â­â­ï¼‰
1. `components/chat.tsx` - æ ¸å¿ƒèŠå¤©ç»„ä»¶
2. `app/api/chat/route.ts` - AI å¯¹è¯ API
3. `lib/db/schema.ts` - æ•°æ®åº“ç»“æ„
4. `lib/types.ts` - ç±»å‹å®šä¹‰

### é‡è¦å‚è€ƒæ–‡ä»¶ï¼ˆâ­â­ï¼‰
1. `components/multimodal-input.tsx` - è¾“å…¥ç»„ä»¶
2. `components/messages.tsx` - æ¶ˆæ¯åˆ—è¡¨
3. `app/(auth)/auth.ts` - è®¤è¯é…ç½®
4. `lib/db/queries.ts` - æ•°æ®åº“æŸ¥è¯¢

### è¾…åŠ©å‚è€ƒæ–‡ä»¶ï¼ˆâ­ï¼‰
1. å„ç§ UI ç»„ä»¶
2. å·¥å…·å‡½æ•°
3. é…ç½®æ–‡ä»¶

---

## ğŸ’¡ å­¦ä¹ æŠ€å·§

1. **ä½¿ç”¨ä»£ç æœç´¢**ï¼šåœ¨åŸé¡¹ç›®ä¸­æœç´¢å…³é”®è¯ï¼Œæ‰¾åˆ°ç›¸å…³å®ç°
2. **å¯¹æ¯”å­¦ä¹ **ï¼šå®ç°åå¯¹æ¯”åŸé¡¹ç›®ï¼Œæ‰¾å‡ºå·®å¼‚å’Œæ”¹è¿›ç‚¹
3. **é€æ­¥æ·±å…¥**ï¼šå…ˆå®ç°åŸºç¡€åŠŸèƒ½ï¼Œå†æ·»åŠ é«˜çº§ç‰¹æ€§
4. **è®°å½•ç¬”è®°**ï¼šè®°å½•å­¦åˆ°çš„çŸ¥è¯†ç‚¹å’Œé‡åˆ°çš„é—®é¢˜

---

è®°ä½ï¼š**ç†è§£æ¯”å¤åˆ¶æ›´é‡è¦ï¼** å…ˆå°è¯•è‡ªå·±å®ç°ï¼Œé‡åˆ°å›°éš¾æ—¶å†å‚è€ƒåŸé¡¹ç›®ã€‚

